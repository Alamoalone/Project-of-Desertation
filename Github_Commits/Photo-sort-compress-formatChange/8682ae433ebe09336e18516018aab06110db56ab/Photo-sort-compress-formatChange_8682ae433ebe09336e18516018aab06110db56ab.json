{
    "sha": "8682ae433ebe09336e18516018aab06110db56ab",
    "node_id": "C_kwDOJ2WJjtoAKDg2ODJhZTQzM2ViZTA5MzM2ZTE4NTE2MDE4YWFiMDYxMTBkYjU2YWI",
    "commit": {
        "author": {
            "name": "mptimch",
            "email": "mptimchenko@mail.ru",
            "date": "2023-07-01T14:15:40Z"
        },
        "committer": {
            "name": "mptimch",
            "email": "mptimchenko@mail.ru",
            "date": "2023-07-01T14:15:40Z"
        },
        "message": "GUI with Null Pointer Exception",
        "tree": {
            "sha": "9b50a45bffc40e7aaee028d859e471d0a4000f97",
            "url": "https://api.github.com/repos/mptimch/Photo-sort-compress-formatChange/git/trees/9b50a45bffc40e7aaee028d859e471d0a4000f97"
        },
        "url": "https://api.github.com/repos/mptimch/Photo-sort-compress-formatChange/git/commits/8682ae433ebe09336e18516018aab06110db56ab",
        "comment_count": 0,
        "verification": {
            "verified": false,
            "reason": "unsigned",
            "signature": null,
            "payload": null
        }
    },
    "url": "https://api.github.com/repos/mptimch/Photo-sort-compress-formatChange/commits/8682ae433ebe09336e18516018aab06110db56ab",
    "html_url": "https://github.com/mptimch/Photo-sort-compress-formatChange/commit/8682ae433ebe09336e18516018aab06110db56ab",
    "comments_url": "https://api.github.com/repos/mptimch/Photo-sort-compress-formatChange/commits/8682ae433ebe09336e18516018aab06110db56ab/comments",
    "author": {
        "login": "mptimch",
        "id": 93775557,
        "node_id": "U_kgDOBZbmxQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/93775557?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mptimch",
        "html_url": "https://github.com/mptimch",
        "followers_url": "https://api.github.com/users/mptimch/followers",
        "following_url": "https://api.github.com/users/mptimch/following{/other_user}",
        "gists_url": "https://api.github.com/users/mptimch/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/mptimch/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/mptimch/subscriptions",
        "organizations_url": "https://api.github.com/users/mptimch/orgs",
        "repos_url": "https://api.github.com/users/mptimch/repos",
        "events_url": "https://api.github.com/users/mptimch/events{/privacy}",
        "received_events_url": "https://api.github.com/users/mptimch/received_events",
        "type": "User",
        "site_admin": false
    },
    "committer": {
        "login": "mptimch",
        "id": 93775557,
        "node_id": "U_kgDOBZbmxQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/93775557?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mptimch",
        "html_url": "https://github.com/mptimch",
        "followers_url": "https://api.github.com/users/mptimch/followers",
        "following_url": "https://api.github.com/users/mptimch/following{/other_user}",
        "gists_url": "https://api.github.com/users/mptimch/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/mptimch/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/mptimch/subscriptions",
        "organizations_url": "https://api.github.com/users/mptimch/orgs",
        "repos_url": "https://api.github.com/users/mptimch/repos",
        "events_url": "https://api.github.com/users/mptimch/events{/privacy}",
        "received_events_url": "https://api.github.com/users/mptimch/received_events",
        "type": "User",
        "site_admin": false
    },
    "parents": [
        {
            "sha": "2a63489fa7d3eb53375271b5ffb14a0c6f2659e9",
            "url": "https://api.github.com/repos/mptimch/Photo-sort-compress-formatChange/commits/2a63489fa7d3eb53375271b5ffb14a0c6f2659e9",
            "html_url": "https://github.com/mptimch/Photo-sort-compress-formatChange/commit/2a63489fa7d3eb53375271b5ffb14a0c6f2659e9"
        }
    ],
    "stats": {
        "total": 108,
        "additions": 31,
        "deletions": 77
    },
    "files": [
        {
            "sha": "ffea55cb7f4d34d785f038d46ea4969f38445869",
            "filename": "src/main/java/GUIForm.java",
            "status": "modified",
            "additions": 3,
            "deletions": 4,
            "changes": 7,
            "blob_url": "https://github.com/mptimch/Photo-sort-compress-formatChange/blob/8682ae433ebe09336e18516018aab06110db56ab/src%2Fmain%2Fjava%2FGUIForm.java",
            "raw_url": "https://github.com/mptimch/Photo-sort-compress-formatChange/raw/8682ae433ebe09336e18516018aab06110db56ab/src%2Fmain%2Fjava%2FGUIForm.java",
            "contents_url": "https://api.github.com/repos/mptimch/Photo-sort-compress-formatChange/contents/src%2Fmain%2Fjava%2FGUIForm.java?ref=8682ae433ebe09336e18516018aab06110db56ab",
            "patch": "@@ -131,7 +131,7 @@ public void actionPerformed(ActionEvent e) {\n                     return;\n                 }\n                 dstFolder = selectedFile.getPath();\n-                outputFileTextField.setText(srcFolder);\n+                outputFileTextField.setText(dstFolder);\n \n             }\n         });\n@@ -225,7 +225,7 @@ public void actionPerformed(ActionEvent e) {\n                     changeFormatBoolean = true;\n                 } else {\n                     sortFotos.setEnabled(true);\n-                    formatPng.setEnabled(true);\n+                    formatJpg.setEnabled(true);\n                     formatWebp.setEnabled(true);\n                     changeFormatBoolean = false;\n                 }\n@@ -485,8 +485,7 @@ public void actionPerformed(ActionEvent e) {\n                     RenameByCreationDate renameByCreationDate = new RenameByCreationDate(files, dstFolder);\n                     isEnd = renameByCreationDate.rename();\n                 } else {\n-\n-                    ImageChanger imageChanger = new ImageChanger(files, compressionRate, width, height, dstFormat, dstFolder, false);\n+                    ImageChanger imageChanger = new ImageChanger(files, compressionRate, width, height, dstFormat, dstFolder, changeFormatBoolean);\n                     isEnd = imageChanger.handlePictures();\n                 }\n "
        },
        {
            "sha": "dd67b4aa58a0c0a64592ed3a711f6b9ed172035e",
            "filename": "src/main/java/ImageChanger.java",
            "status": "modified",
            "additions": 18,
            "deletions": 30,
            "changes": 48,
            "blob_url": "https://github.com/mptimch/Photo-sort-compress-formatChange/blob/8682ae433ebe09336e18516018aab06110db56ab/src%2Fmain%2Fjava%2FImageChanger.java",
            "raw_url": "https://github.com/mptimch/Photo-sort-compress-formatChange/raw/8682ae433ebe09336e18516018aab06110db56ab/src%2Fmain%2Fjava%2FImageChanger.java",
            "contents_url": "https://api.github.com/repos/mptimch/Photo-sort-compress-formatChange/contents/src%2Fmain%2Fjava%2FImageChanger.java?ref=8682ae433ebe09336e18516018aab06110db56ab",
            "patch": "@@ -38,9 +38,7 @@ public boolean handlePictures() {\n             String format = fileFormat.getFileFormat();\n \n             String fileName = getFileName(file.getName());\n-            if (compressionRate > 0) {\n-                compressImage(file, format, fileName);\n-            } else cutImageByPixels(changeFormat, file, format, fileName);\n+            cutImageByPixels(changeFormat, file, format, fileName);\n         });\n         return true;\n     }\n@@ -49,8 +47,22 @@ private void cutImageByPixels(boolean changeFormat, File file, String format, St\n         String pathOfNewFile = \"\"; // for logger\n         try {\n             image = ImageIO.read(file);\n-            image = Scalr.resize(image, width, height);\n \n+            // changing image\n+            if (width > 0 && height > 0) {\n+                image = Scalr.resize(image, width, height);\n+            }\n+\n+            if (compressionRate > 0) {\n+                height = image.getHeight();\n+                width = image.getWidth();\n+                double buffer = (double) compressionRate / 100;\n+                int newWidth = width - (int) (width * buffer);\n+                int newHeight = height - (int) (height * buffer);\n+                image = Scalr.resize(image, newWidth, newHeight);\n+            }\n+\n+            // saving image\n             if (changeFormat) {\n                 File newFile = new File(dstFolder + \"\\\\\" + fileName + \".\" + dstFormat.toString());\n                 newFile = escapeDuplicateFiles(newFile, dstFolder, fileName);\n@@ -70,30 +82,6 @@ private void cutImageByPixels(boolean changeFormat, File file, String format, St\n     }\n \n \n-    private void compressImage(File file, String format, String fileName) {\n-        String pathOfNewFile = \"\"; // for logger\n-        try {\n-            long size = file.length();\n-            double buffer = (double) compressionRate / 100;\n-            Long newSize = size - (int) (size * buffer);\n-            int targetSize = newSize.intValue() / 1024;\n-\n-            image = ImageIO.read(file);\n-            Scalr.resize(image, targetSize);\n-\n-            File newFile = new File(dstFolder + \"\\\\\" + file.getName());\n-            newFile = escapeDuplicateFiles(newFile, dstFolder, fileName);\n-            pathOfNewFile = newFile.getPath();\n-            ImageIO.write(image, format, newFile);\n-            Main.logger.info(\"обработали файл \" + newFile.getName());\n-\n-        } catch (Exception e) {\n-            copyErrorFile(file, format, fileName);\n-            Main.logger.error(\"Не удалось сохранить файл \" + file.getName() + \" Путь = \" + pathOfNewFile);\n-        }\n-\n-    }\n-\n \n     private void copyErrorFile(File file, String format, String fileName) {\n         File folder = new File(errorFolder);\n@@ -108,7 +96,7 @@ private void copyErrorFile(File file, String format, String fileName) {\n             Files.copy(file.toPath(), errorFile.toPath());\n         } catch (IOException e) {\n             Main.logger.error(\"Не удалось сохранить файл в errorfile!  \" + errorFile.getPath()\n-                    + \"Сообщение об ошибке: \"+ e.getMessage());\n+                    + \"Сообщение об ошибке: \" + e.getMessage());\n         }\n     }\n \n@@ -128,4 +116,4 @@ private String getFileName(String fileNameWithFiletype) {\n         int dotIndex = fileNameWithFiletype.lastIndexOf(\".\");\n         return fileNameWithFiletype.substring(0, dotIndex);\n     }\n-}\n+}\n\\ No newline at end of file"
        },
        {
            "sha": "eaa4c5db1004155896997d1cf705dd3aeec3e568",
            "filename": "src/main/java/Main.java",
            "status": "modified",
            "additions": 10,
            "deletions": 43,
            "changes": 53,
            "blob_url": "https://github.com/mptimch/Photo-sort-compress-formatChange/blob/8682ae433ebe09336e18516018aab06110db56ab/src%2Fmain%2Fjava%2FMain.java",
            "raw_url": "https://github.com/mptimch/Photo-sort-compress-formatChange/raw/8682ae433ebe09336e18516018aab06110db56ab/src%2Fmain%2Fjava%2FMain.java",
            "contents_url": "https://api.github.com/repos/mptimch/Photo-sort-compress-formatChange/contents/src%2Fmain%2Fjava%2FMain.java?ref=8682ae433ebe09336e18516018aab06110db56ab",
            "patch": "@@ -1,6 +1,8 @@\n import org.apache.logging.log4j.LogManager;\n import org.apache.logging.log4j.Logger;\n \n+import javax.swing.*;\n+import java.awt.*;\n import java.io.File;\n import java.io.FileInputStream;\n import java.io.IOException;\n@@ -14,52 +16,17 @@ public class Main {\n \n     public static void main(String[] args) throws IOException {\n \n-        Properties properties = new Properties();\n-        ConvertToThisFormats dstFormat = null;\n+            String srcFolder = \"\";\n+            String dstFolder = \"\";\n \n-        String currentDirectory = System.getProperty(\"user.dir\");\n-        FileInputStream fileInputStream = new FileInputStream(currentDirectory + File.separator + \"config.properties\");\n-\n-\n-        properties.load(fileInputStream);\n-        fileInputStream.close();\n-\n-\n-        String srcFolder = properties.getProperty(\"input_path\");\n-        String dstFolder = properties.getProperty(\"output_path\");\n-\n-        boolean changeFormat = false;\n-        if (!properties.getProperty(\"change_format\").equals(\"null\")) {\n-        switch (properties.getProperty(\"change_format\")) {\n-            case \"jpg\" -> dstFormat = ConvertToThisFormats.jpg;\n-            case \"png\" -> dstFormat = ConvertToThisFormats.png;\n-            case \"webp\" -> dstFormat = ConvertToThisFormats.webp;\n-        }\n-        changeFormat = true;\n-        }\n-\n-        int height = Integer.parseInt(properties.getProperty(\"change_size_by_pizels_height\"));\n-        int width = Integer.parseInt(properties.getProperty(\"change_size_by_pizels_width\"));\n-\n-        Integer compressionRate = Integer.parseInt(properties.getProperty(\"change_size_in_percents\"));\n-\n-        boolean renamePhotos = Boolean.valueOf(properties.getProperty(\"rename_photo_video_by_creation_date\"));\n-\n-\n-        //Create a list of files. Collect files from all subfolders using a recursive function\n-        File srcDir = new File(srcFolder);\n-        File[] filesArray = srcDir.listFiles();\n-        ArrayList<File> files = listFiles(new ArrayList<>(Arrays.asList(filesArray)));\n-\n-        if (renamePhotos) {\n-            RenameByCreationDate renameByCreationDate = new RenameByCreationDate(files, dstFolder);\n-            renameByCreationDate.rename();\n-        } else {\n-            ImageChanger imageChanger = new ImageChanger(files, compressionRate, width, height, dstFormat, dstFolder, changeFormat);\n-            imageChanger.handlePictures();\n+            ConvertToThisFormats dstFormat;\n \n+            JFrame frame = new JFrame(\"My GUI Form\");\n+            frame.setContentPane(new GUIForm().getRootPanel());\n+            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n+            frame.setSize(new Dimension(600, 700)); // Установите желаемый размер окна\n+            frame.setVisible(true);\n         }\n-    }\n \n \n          public static ArrayList<File> listFiles (ArrayList < File > src) {"
        }
    ]
}