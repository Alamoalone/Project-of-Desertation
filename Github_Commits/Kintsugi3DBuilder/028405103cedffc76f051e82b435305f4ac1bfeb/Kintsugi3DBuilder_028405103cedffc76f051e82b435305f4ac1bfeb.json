{
    "sha": "028405103cedffc76f051e82b435305f4ac1bfeb",
    "node_id": "C_kwDODEE_ndoAKDAyODQwNTEwM2NlZGZmYzc2ZjA1MWU4MmI0MzUzMDVmNGFjMWJmZWI",
    "commit": {
        "author": {
            "name": "Michael Tetzlaff",
            "email": "michaelt919@gmail.com",
            "date": "2023-10-16T22:35:57Z"
        },
        "committer": {
            "name": "Michael Tetzlaff",
            "email": "michaelt919@gmail.com",
            "date": "2023-10-16T22:35:57Z"
        },
        "message": "Several small bug fixes, improvements features\n* Cleaned up specular fit GUI and added checkbox for translucency\n* Grid is now enabled by default\n* Fixed bug where saving would trigger null pointer exception when attempting to save glTF and textures before an instance exists.",
        "tree": {
            "sha": "81796151461b1ca61ff88c34dca9092e6410132e",
            "url": "https://api.github.com/repos/michaelt919/Kintsugi3DBuilder/git/trees/81796151461b1ca61ff88c34dca9092e6410132e"
        },
        "url": "https://api.github.com/repos/michaelt919/Kintsugi3DBuilder/git/commits/028405103cedffc76f051e82b435305f4ac1bfeb",
        "comment_count": 0,
        "verification": {
            "verified": false,
            "reason": "unsigned",
            "signature": null,
            "payload": null
        }
    },
    "url": "https://api.github.com/repos/michaelt919/Kintsugi3DBuilder/commits/028405103cedffc76f051e82b435305f4ac1bfeb",
    "html_url": "https://github.com/michaelt919/Kintsugi3DBuilder/commit/028405103cedffc76f051e82b435305f4ac1bfeb",
    "comments_url": "https://api.github.com/repos/michaelt919/Kintsugi3DBuilder/commits/028405103cedffc76f051e82b435305f4ac1bfeb/comments",
    "author": {
        "login": "michaelt919",
        "id": 4734191,
        "node_id": "MDQ6VXNlcjQ3MzQxOTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4734191?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/michaelt919",
        "html_url": "https://github.com/michaelt919",
        "followers_url": "https://api.github.com/users/michaelt919/followers",
        "following_url": "https://api.github.com/users/michaelt919/following{/other_user}",
        "gists_url": "https://api.github.com/users/michaelt919/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/michaelt919/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/michaelt919/subscriptions",
        "organizations_url": "https://api.github.com/users/michaelt919/orgs",
        "repos_url": "https://api.github.com/users/michaelt919/repos",
        "events_url": "https://api.github.com/users/michaelt919/events{/privacy}",
        "received_events_url": "https://api.github.com/users/michaelt919/received_events",
        "type": "User",
        "site_admin": false
    },
    "committer": {
        "login": "michaelt919",
        "id": 4734191,
        "node_id": "MDQ6VXNlcjQ3MzQxOTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4734191?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/michaelt919",
        "html_url": "https://github.com/michaelt919",
        "followers_url": "https://api.github.com/users/michaelt919/followers",
        "following_url": "https://api.github.com/users/michaelt919/following{/other_user}",
        "gists_url": "https://api.github.com/users/michaelt919/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/michaelt919/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/michaelt919/subscriptions",
        "organizations_url": "https://api.github.com/users/michaelt919/orgs",
        "repos_url": "https://api.github.com/users/michaelt919/repos",
        "events_url": "https://api.github.com/users/michaelt919/events{/privacy}",
        "received_events_url": "https://api.github.com/users/michaelt919/received_events",
        "type": "User",
        "site_admin": false
    },
    "parents": [
        {
            "sha": "25de76975dbce2b5ec97e52a5bc38d31e16bc8fb",
            "url": "https://api.github.com/repos/michaelt919/Kintsugi3DBuilder/commits/25de76975dbce2b5ec97e52a5bc38d31e16bc8fb",
            "html_url": "https://github.com/michaelt919/Kintsugi3DBuilder/commit/25de76975dbce2b5ec97e52a5bc38d31e16bc8fb"
        }
    ],
    "stats": {
        "total": 224,
        "additions": 60,
        "deletions": 164
    },
    "files": [
        {
            "sha": "ae79296e77e49e7b1bae0a62d5d04a402c9c9f09",
            "filename": "src/kintsugi3d/builder/export/specular/SpecularFitRequestUI.java",
            "status": "modified",
            "additions": 6,
            "deletions": 115,
            "changes": 121,
            "blob_url": "https://github.com/michaelt919/Kintsugi3DBuilder/blob/028405103cedffc76f051e82b435305f4ac1bfeb/src%2Fkintsugi3d%2Fbuilder%2Fexport%2Fspecular%2FSpecularFitRequestUI.java",
            "raw_url": "https://github.com/michaelt919/Kintsugi3DBuilder/raw/028405103cedffc76f051e82b435305f4ac1bfeb/src%2Fkintsugi3d%2Fbuilder%2Fexport%2Fspecular%2FSpecularFitRequestUI.java",
            "contents_url": "https://api.github.com/repos/michaelt919/Kintsugi3DBuilder/contents/src%2Fkintsugi3d%2Fbuilder%2Fexport%2Fspecular%2FSpecularFitRequestUI.java?ref=028405103cedffc76f051e82b435305f4ac1bfeb",
            "patch": "@@ -41,32 +41,21 @@\n public class SpecularFitRequestUI implements IBRRequestUI\n {\n     private static final Logger log = LoggerFactory.getLogger(SpecularFitRequestUI.class);\n-\n     @FXML private CheckBox smithCheckBox;\n-    @FXML private CheckBox levenbergMarquardtCheckBox;\n     @FXML private TextField unsuccessfulLMIterationsTextField;\n     @FXML private TextField widthTextField;\n     @FXML private TextField heightTextField;\n-    @FXML private TextField exportDirectoryField;\n \n     @FXML private TextField basisCountTextField;\n-    @FXML private CheckBox combineWeightsCheckbox;\n     @FXML private TextField mfdResolutionTextField;\n     @FXML private TextField convergenceToleranceTextField;\n     @FXML private TextField specularSmoothnessTextField;\n     @FXML private TextField metallicityTextField;\n+    @FXML private CheckBox translucencyCheckBox;\n     @FXML private CheckBox normalRefinementCheckBox;\n     @FXML private TextField minNormalDampingTextField;\n     @FXML private TextField normalSmoothingIterationsTextField;\n \n-    @FXML private CheckBox reconstructAllCheckBox;\n-    @FXML private TextField reconstructionViewSetField;\n-\n-    @FXML private CheckBox priorSolutionCheckBox;\n-    @FXML private TextField priorSolutionField;\n-\n-    @FXML private CheckBox exportGLTFCheckbox;\n-    @FXML private CheckBox exportGLTFPackedCheckbox;\n     @FXML private CheckBox exportTextureLODsCheckbox;\n     @FXML private CheckBox openViewerOnComplete;\n \n@@ -100,85 +89,6 @@ public static SpecularFitRequestUI create(Window window, Kintsugi3DBuilderState\n         return svdRequestUI;\n     }\n \n-    @FXML\n-    private void exportDirectoryButtonAction()\n-    {\n-        this.directoryChooser.setTitle(\"Choose an export directory\");\n-        if (exportDirectoryField.getText().isEmpty())\n-        {\n-            if (lastDirectory != null)\n-            {\n-                this.directoryChooser.setInitialDirectory(lastDirectory);\n-            }\n-        }\n-        else\n-        {\n-            File currentValue = new File(exportDirectoryField.getText());\n-            this.directoryChooser.setInitialDirectory(currentValue);\n-        }\n-        File file = this.directoryChooser.showDialog(stage.getOwner());\n-        if (file != null)\n-        {\n-            exportDirectoryField.setText(file.toString());\n-            lastDirectory = file;\n-        }\n-    }\n-\n-    @FXML\n-    public void reconstructionViewSetButtonAction()\n-    {\n-        this.fileChooser.setTitle(\"Choose an view set for image reconstruction\");\n-        this.fileChooser.setSelectedExtensionFilter( // Doesn't work; not sure why.\n-            new FileChooser.ExtensionFilter(\"View Set files\", \"*.vset\"));\n-        if (reconstructionViewSetField.getText().isEmpty())\n-        {\n-            // Default for when the text field is empty.\n-            if (lastViewSet != null)\n-            {\n-                // There was a previously selected view set, use that one.\n-                this.fileChooser.setInitialDirectory(lastViewSet.getParentFile());\n-                this.fileChooser.setInitialFileName(lastViewSet.getName());\n-            }\n-        }\n-        else\n-        {\n-            // If the text field is not empty, use the current value as the starting directory in the file dialog.\n-            File currentValue = new File(reconstructionViewSetField.getText());\n-            this.fileChooser.setInitialDirectory(currentValue.getParentFile());\n-            this.fileChooser.setInitialFileName(currentValue.getName());\n-        }\n-        File file = this.fileChooser.showOpenDialog(stage.getOwner());\n-        if (file != null)\n-        {\n-            reconstructionViewSetField.setText(file.toString());\n-            lastViewSet = file;\n-        }\n-    }\n-\n-    @FXML\n-    public void priorSolutionButtonAction()\n-    {\n-        this.directoryChooser.setTitle(\"Choose a folder containing the prior solution\");\n-        if (priorSolutionField.getText().isEmpty())\n-        {\n-            if (lastDirectory != null)\n-            {\n-                this.directoryChooser.setInitialDirectory(lastDirectory);\n-            }\n-        }\n-        else\n-        {\n-            File currentValue = new File(priorSolutionField.getText());\n-            this.directoryChooser.setInitialDirectory(currentValue);\n-        }\n-        File file = this.directoryChooser.showDialog(stage.getOwner());\n-        if (file != null)\n-        {\n-            priorSolutionField.setText(file.toString());\n-            lastDirectory = file;\n-        }\n-    }\n-\n     @FXML\n     public void cancelButtonAction()\n     {\n@@ -215,6 +125,7 @@ public <ContextType extends Context<ContextType>> void prompt(IBRRequestQueue<Co\n             settings.getSpecularBasisSettings().setSpecularSmoothness(specularSmoothness);\n             double metallicity = Double.parseDouble(metallicityTextField.getText());\n             settings.getSpecularBasisSettings().setMetallicity(metallicity);\n+            settings.setShouldIncludeConstantTerm(translucencyCheckBox.isSelected());\n \n             // Normal estimation settings\n             boolean normalRefinementEnabled = normalRefinementCheckBox.isSelected();\n@@ -228,37 +139,17 @@ public <ContextType extends Context<ContextType>> void prompt(IBRRequestQueue<Co\n \n             // Settings which shouldn't usually need to be changed\n             settings.getSpecularBasisSettings().setSmithMaskingShadowingEnabled(smithCheckBox.isSelected());\n-            boolean levenbergMarquardtEnabled = true; //levenbergMarquardtCheckBox.isSelected();\n+            boolean levenbergMarquardtEnabled = true;\n             settings.getNormalOptimizationSettings().setLevenbergMarquardtEnabled(levenbergMarquardtEnabled);\n             int unsuccessfulLMIterationsAllowed = Integer.parseInt(unsuccessfulLMIterationsTextField.getText());\n             settings.getNormalOptimizationSettings().setUnsuccessfulLMIterationsAllowed(unsuccessfulLMIterationsAllowed);\n-//            boolean reconstructAll = reconstructAllCheckBox.isSelected();\n-            settings.getReconstructionSettings().setReconstructAll(false /* reconstructAll*/);\n+            settings.getReconstructionSettings().setReconstructAll(false);\n \n             settings.getExportSettings().setGenerateLowResTextures(exportTextureLODsCheckbox.isSelected());\n \n             // glTF export settings\n-            settings.getExportSettings().setGlTFEnabled(true /* exportGLTFCheckbox.isSelected() */);\n-            settings.getExportSettings().setGlTFPackTextures(exportGLTFPackedCheckbox.isSelected());\n-\n-//            if (reconstructionViewSetField.getText() != null && !reconstructionViewSetField.getText().isEmpty())\n-//            {\n-//                // Reconstruction view set\n-//                try\n-//                {\n-//                    ReadonlyViewSet reconstructionViewSet = ViewSetReaderFromVSET.getInstance().readFromFile(\n-//                        new File(reconstructionViewSetField.getText()));\n-//                    settings.getReconstructionSettings().setReconstructionViewSet(reconstructionViewSet);\n-//                }\n-//                catch (Exception e)\n-//                {\n-//                    Alert alert = new Alert(Alert.AlertType.ERROR);\n-//                    alert.setTitle(\"Invalid view set\");\n-//                    alert.setHeaderText(\"Reconstruction view set is invalid.\");\n-//                    alert.setContentText(\"Please try another view set or leave the field blank to use the view set for the current model.\");\n-//                    log.error(\"Invalid view set error:\", e);\n-//                }\n-//            }\n+            settings.getExportSettings().setGlTFEnabled(true);\n+            settings.getExportSettings().setGlTFPackTextures(false);\n \n             // Image cache settings\n             settings.getImageCacheSettings().setCacheParentDirectory(ApplicationFolders.getFitCacheRootDirectory().toFile());"
        },
        {
            "sha": "03faeab2f6e3d65be35eb1fede7f9950babaa7dd",
            "filename": "src/kintsugi3d/builder/javafx/MainApplication.java",
            "status": "modified",
            "additions": 1,
            "deletions": 1,
            "changes": 2,
            "blob_url": "https://github.com/michaelt919/Kintsugi3DBuilder/blob/028405103cedffc76f051e82b435305f4ac1bfeb/src%2Fkintsugi3d%2Fbuilder%2Fjavafx%2FMainApplication.java",
            "raw_url": "https://github.com/michaelt919/Kintsugi3DBuilder/raw/028405103cedffc76f051e82b435305f4ac1bfeb/src%2Fkintsugi3d%2Fbuilder%2Fjavafx%2FMainApplication.java",
            "contents_url": "https://api.github.com/repos/michaelt919/Kintsugi3DBuilder/contents/src%2Fkintsugi3d%2Fbuilder%2Fjavafx%2FMainApplication.java?ref=028405103cedffc76f051e82b435305f4ac1bfeb",
            "patch": "@@ -257,7 +257,7 @@ public void start(Stage primaryStage) throws IOException\n         settingsModel.createSettingFromProperty(\"occlusionBias\", Number.class,\n             StaticUtilities.clamp(0, 0.1, new SimpleFloatProperty(0.0025f)), true);\n         settingsModel.createObjectSetting(\"weightMode\", ShadingParameterMode.PER_PIXEL, true);\n-        settingsModel.createBooleanSetting(\"is3DGridEnabled\", false, true);\n+        settingsModel.createBooleanSetting(\"is3DGridEnabled\", true, true);\n         settingsModel.createBooleanSetting(\"compassEnabled\", false, true);\n         settingsModel.createBooleanSetting(\"multisamplingEnabled\", false, true);\n         settingsModel.createBooleanSetting(\"halfResolutionEnabled\", false, true);"
        },
        {
            "sha": "fa9c8d22661281d8e60c6d470b373f4d7593ebab",
            "filename": "src/kintsugi3d/builder/rendering/IBRInstanceManager.java",
            "status": "modified",
            "additions": 23,
            "deletions": 5,
            "changes": 28,
            "blob_url": "https://github.com/michaelt919/Kintsugi3DBuilder/blob/028405103cedffc76f051e82b435305f4ac1bfeb/src%2Fkintsugi3d%2Fbuilder%2Frendering%2FIBRInstanceManager.java",
            "raw_url": "https://github.com/michaelt919/Kintsugi3DBuilder/raw/028405103cedffc76f051e82b435305f4ac1bfeb/src%2Fkintsugi3d%2Fbuilder%2Frendering%2FIBRInstanceManager.java",
            "contents_url": "https://api.github.com/repos/michaelt919/Kintsugi3DBuilder/contents/src%2Fkintsugi3d%2Fbuilder%2Frendering%2FIBRInstanceManager.java?ref=028405103cedffc76f051e82b435305f4ac1bfeb",
            "patch": "@@ -18,6 +18,7 @@\n import kintsugi3d.builder.io.ViewSetWriterToVSET;\n import kintsugi3d.builder.resources.ibr.IBRResourcesImageSpace;\n import kintsugi3d.builder.resources.ibr.IBRResourcesImageSpace.Builder;\n+import kintsugi3d.builder.resources.specular.SpecularMaterialResources;\n import kintsugi3d.builder.state.ReadonlyCameraModel;\n import kintsugi3d.builder.state.ReadonlyLightingModel;\n import kintsugi3d.builder.state.ReadonlyObjectModel;\n@@ -349,21 +350,38 @@ public void saveToVSETFile(File vsetFile) throws IOException\n     @Override\n     public void saveMaterialFiles(File materialDirectory, Runnable finishedCallback)\n     {\n-        Rendering.runLater(() ->\n+        if (ibrInstance == null || ibrInstance.getIBRResources() == null\n+            || ibrInstance.getIBRResources().getSpecularMaterialResources() != null)\n         {\n-            ibrInstance.getIBRResources().getSpecularMaterialResources().saveAll(materialDirectory);\n-\n             if (finishedCallback != null)\n             {\n                 finishedCallback.run();\n             }\n-        });\n+        }\n+        else\n+        {\n+            SpecularMaterialResources<ContextType> material\n+                = ibrInstance.getIBRResources().getSpecularMaterialResources();\n+\n+            Rendering.runLater(() ->\n+            {\n+                material.saveAll(materialDirectory);\n+\n+                if (finishedCallback != null)\n+                {\n+                    finishedCallback.run();\n+                }\n+            });\n+        }\n     }\n \n     @Override\n     public void saveGlTF(File outputDirectory, ExportSettings settings)\n     {\n-        ibrInstance.saveGlTF(outputDirectory, settings);\n+        if (ibrInstance != null)\n+        {\n+            ibrInstance.saveGlTF(outputDirectory, settings);\n+        }\n     }\n \n     @Override"
        },
        {
            "sha": "2a1bed0474abb5e97430186c275452311c7f1fb8",
            "filename": "src/main/resources/fxml/export/SpecularFitRequestUI.fxml",
            "status": "modified",
            "additions": 30,
            "deletions": 43,
            "changes": 73,
            "blob_url": "https://github.com/michaelt919/Kintsugi3DBuilder/blob/028405103cedffc76f051e82b435305f4ac1bfeb/src%2Fmain%2Fresources%2Ffxml%2Fexport%2FSpecularFitRequestUI.fxml",
            "raw_url": "https://github.com/michaelt919/Kintsugi3DBuilder/raw/028405103cedffc76f051e82b435305f4ac1bfeb/src%2Fmain%2Fresources%2Ffxml%2Fexport%2FSpecularFitRequestUI.fxml",
            "contents_url": "https://api.github.com/repos/michaelt919/Kintsugi3DBuilder/contents/src%2Fmain%2Fresources%2Ffxml%2Fexport%2FSpecularFitRequestUI.fxml?ref=028405103cedffc76f051e82b435305f4ac1bfeb",
            "patch": "@@ -13,47 +13,34 @@\n   -->\n \n <?import javafx.scene.control.*?>\n-<?import javafx.scene.layout.AnchorPane?>\n-<AnchorPane prefHeight=\"390.0\" prefWidth=\"555.0\" styleClass=\"anchor-pane\" stylesheets=\"@../kintsugiStyling.css\" xmlns=\"http://javafx.com/javafx/17.0.2-ea\" xmlns:fx=\"http://javafx.com/fxml/1\" fx:controller=\"kintsugi3d.builder.export.specular.SpecularFitRequestUI\">\n-   <Label layoutX=\"14.0\" layoutY=\"14.0\" text=\"Export directory:\" visible=\"false\" />\n-   <TextField fx:id=\"exportDirectoryField\" layoutX=\"122.0\" layoutY=\"10.0\" prefHeight=\"25.0\" prefWidth=\"300.0\" visible=\"false\" />\n-   <Button layoutX=\"428.0\" layoutY=\"10.0\" mnemonicParsing=\"false\" onAction=\"#exportDirectoryButtonAction\" text=\"Choose directory...\" visible=\"false\" />\n-   <Button fx:id=\"runButton\" layoutX=\"11.0\" layoutY=\"354.0\" mnemonicParsing=\"false\" text=\"Run\" />\n-   <Label layoutX=\"14.0\" layoutY=\"47.0\" text=\"Width:\" />\n-   <TextField fx:id=\"widthTextField\" layoutX=\"54.0\" layoutY=\"43.0\" prefWidth=\"56.0\" text=\"2048\" />\n-   <Label layoutX=\"116.0\" layoutY=\"47.0\" text=\"Height:\" />\n-   <TextField fx:id=\"heightTextField\" layoutX=\"161.0\" layoutY=\"43.0\" prefHeight=\"25.0\" prefWidth=\"56.0\" text=\"2048\" />\n-   <Button layoutX=\"58.0\" layoutY=\"354.0\" mnemonicParsing=\"false\" onAction=\"#cancelButtonAction\" text=\"Cancel\" />\n-   <Label layoutX=\"223.0\" layoutY=\"47.0\" text=\"Specular count:\" />\n-   <TextField fx:id=\"basisCountTextField\" layoutX=\"310.0\" layoutY=\"43.0\" prefHeight=\"25.0\" prefWidth=\"56.0\" text=\"8\" />\n-   <Label layoutX=\"376.0\" layoutY=\"47.0\" text=\"Specular resolution:\" />\n-   <TextField fx:id=\"mfdResolutionTextField\" layoutX=\"485.0\" layoutY=\"43.0\" prefHeight=\"25.0\" prefWidth=\"56.0\" text=\"90\" />\n-   <Label layoutX=\"14.0\" layoutY=\"80.0\" text=\"Convergence tolerance:\" />\n-   <Label layoutX=\"234.0\" layoutY=\"80.0\" text=\"Specular smoothness:\" />\n-   <Label layoutX=\"422.0\" layoutY=\"80.0\" text=\"Metallicity:\" />\n-   <TextField fx:id=\"convergenceToleranceTextField\" layoutX=\"147.0\" layoutY=\"76.0\" prefHeight=\"25.0\" prefWidth=\"76.0\" text=\"0.00001\" />\n-   <TextField fx:id=\"specularSmoothnessTextField\" layoutX=\"355.0\" layoutY=\"76.0\" prefHeight=\"25.0\" prefWidth=\"56.0\" text=\"1.0\" />\n-   <TextField fx:id=\"metallicityTextField\" layoutX=\"485.0\" layoutY=\"76.0\" prefHeight=\"25.0\" prefWidth=\"56.0\" text=\"0.0\" />\n-   <Label layoutX=\"151.0\" layoutY=\"113.0\" text=\"Min. normal damping:\" />\n-   <Label layoutX=\"341.0\" layoutY=\"113.0\" text=\"Normal smooth iterations:\" />\n-   <CheckBox fx:id=\"normalRefinementCheckBox\" layoutX=\"14.0\" layoutY=\"113.0\" mnemonicParsing=\"false\" selected=\"true\" text=\"Normal refinement\" />\n-   <TextField fx:id=\"minNormalDampingTextField\" layoutX=\"272.0\" layoutY=\"109.0\" prefHeight=\"25.0\" prefWidth=\"56.0\" text=\"1.0\" />\n-   <TextField fx:id=\"normalSmoothingIterationsTextField\" layoutX=\"485.0\" layoutY=\"109.0\" prefHeight=\"25.0\" prefWidth=\"56.0\" text=\"0\" />\n-   <Label layoutX=\"14.0\" layoutY=\"227.0\" text=\"Reconstruction view set:\" visible=\"false\" />\n-   <TextField fx:id=\"reconstructionViewSetField\" layoutX=\"152.0\" layoutY=\"224.0\" prefWidth=\"272.0\" visible=\"false\" />\n-   <Button layoutX=\"428.0\" layoutY=\"223.0\" mnemonicParsing=\"false\" onAction=\"#reconstructionViewSetButtonAction\" prefHeight=\"25.0\" prefWidth=\"114.0\" text=\"Choose file...\" visible=\"false\" />\n-   <CheckBox fx:id=\"smithCheckBox\" layoutX=\"14.0\" layoutY=\"144.0\" mnemonicParsing=\"false\" selected=\"true\" text=\"Smith masking/shadowing\" />\n-   <CheckBox fx:id=\"levenbergMarquardtCheckBox\" layoutX=\"187.0\" layoutY=\"144.0\" mnemonicParsing=\"false\" selected=\"true\" text=\"Levenberg-Marquardt (recommended)\" visible=\"false\" />\n-   <TextField fx:id=\"unsuccessfulLMIterationsTextField\" layoutX=\"310.0\" layoutY=\"166.0\" prefHeight=\"25.0\" prefWidth=\"56.0\" text=\"8\" />\n-   <Label layoutX=\"14.0\" layoutY=\"170.0\" text=\"Unsuccessful Levenberg-Marquardt iterations allowed:\" />\n-   <CheckBox fx:id=\"reconstructAllCheckBox\" layoutX=\"13.0\" layoutY=\"198.0\" mnemonicParsing=\"false\" text=\"Reconstruct all images for validation\" visible=\"false\" />\n-   <CheckBox fx:id=\"combineWeightsCheckbox\" layoutX=\"240.0\" layoutY=\"198.0\" mnemonicParsing=\"false\" selected=\"true\" text=\"Combine greyscale weights\" visible=\"false\" />\n-   <CheckBox fx:id=\"priorSolutionCheckBox\" layoutX=\"13.0\" layoutY=\"260.0\" mnemonicParsing=\"false\" text=\"Fit from prior solution\" visible=\"false\" />\n-   <Label layoutX=\"14.0\" layoutY=\"291.0\" text=\"Prior solution directory:\" visible=\"false\" />\n-   <TextField fx:id=\"priorSolutionField\" layoutX=\"152.0\" layoutY=\"287.0\" prefWidth=\"272.0\" visible=\"false\" />\n-   <Button layoutX=\"428.0\" layoutY=\"287.0\" mnemonicParsing=\"false\" onAction=\"#priorSolutionButtonAction\" prefHeight=\"25.0\" prefWidth=\"114.0\" text=\"Choose file...\" visible=\"false\" />\n-   <CheckBox fx:id=\"exportGLTFCheckbox\" layoutX=\"14.0\" layoutY=\"322.0\" mnemonicParsing=\"false\" selected=\"true\" text=\"Export glTF\" visible=\"false\" />\n-   <CheckBox fx:id=\"exportGLTFPackedCheckbox\" disable=\"true\" layoutX=\"110.0\" layoutY=\"322.0\" mnemonicParsing=\"false\" text=\"Pack textures with glTF\" visible=\"false\" />\n-   <CheckBox fx:id=\"exportTextureLODsCheckbox\" layoutX=\"270.0\" layoutY=\"322.0\" mnemonicParsing=\"false\" text=\"Generate low-res textures\" />\n-   <CheckBox fx:id=\"openViewerOnComplete\" layoutX=\"270.0\" layoutY=\"340.0\" mnemonicParsing=\"false\" text=\"Open Viewer once complete\" />\n+<?import javafx.scene.layout.*?>\n+\n+<AnchorPane prefHeight=\"279.0\" prefWidth=\"555.0\" styleClass=\"anchor-pane\" stylesheets=\"@../kintsugiStyling.css\" xmlns=\"http://javafx.com/javafx/17.0.2-ea\" xmlns:fx=\"http://javafx.com/fxml/1\" fx:controller=\"kintsugi3d.builder.export.specular.SpecularFitRequestUI\">\n+   <Button fx:id=\"runButton\" layoutX=\"14.0\" layoutY=\"238.0\" mnemonicParsing=\"false\" text=\"Run\" />\n+   <Label layoutX=\"14.0\" layoutY=\"18.0\" text=\"Width:\" />\n+   <TextField fx:id=\"widthTextField\" layoutX=\"54.0\" layoutY=\"14.0\" prefWidth=\"56.0\" text=\"2048\" />\n+   <Label layoutX=\"116.0\" layoutY=\"18.0\" text=\"Height:\" />\n+   <TextField fx:id=\"heightTextField\" layoutX=\"161.0\" layoutY=\"14.0\" prefHeight=\"25.0\" prefWidth=\"56.0\" text=\"2048\" />\n+   <Button layoutX=\"61.0\" layoutY=\"238.0\" mnemonicParsing=\"false\" onAction=\"#cancelButtonAction\" text=\"Cancel\" />\n+   <Label layoutX=\"223.0\" layoutY=\"18.0\" text=\"Specular count:\" />\n+   <TextField fx:id=\"basisCountTextField\" layoutX=\"310.0\" layoutY=\"14.0\" prefHeight=\"25.0\" prefWidth=\"56.0\" text=\"8\" />\n+   <Label layoutX=\"376.0\" layoutY=\"18.0\" text=\"Specular resolution:\" />\n+   <TextField fx:id=\"mfdResolutionTextField\" layoutX=\"485.0\" layoutY=\"14.0\" prefHeight=\"25.0\" prefWidth=\"56.0\" text=\"90\" />\n+   <Label layoutX=\"14.0\" layoutY=\"85.0\" text=\"Convergence tolerance:\" />\n+   <Label layoutX=\"234.0\" layoutY=\"85.0\" text=\"Specular smoothness:\" />\n+   <Label layoutX=\"150.0\" layoutY=\"50.0\" text=\"Metallicity:\" />\n+   <TextField fx:id=\"convergenceToleranceTextField\" layoutX=\"147.0\" layoutY=\"81.0\" prefHeight=\"25.0\" prefWidth=\"76.0\" text=\"0.00001\" />\n+   <TextField fx:id=\"specularSmoothnessTextField\" layoutX=\"355.0\" layoutY=\"81.0\" prefHeight=\"25.0\" prefWidth=\"56.0\" text=\"1.0\" />\n+   <TextField fx:id=\"metallicityTextField\" layoutX=\"213.0\" layoutY=\"46.0\" prefHeight=\"25.0\" prefWidth=\"56.0\" text=\"0.0\" />\n+   <Label layoutX=\"151.0\" layoutY=\"116.0\" text=\"Min. normal damping:\" />\n+   <Label layoutX=\"341.0\" layoutY=\"116.0\" text=\"Normal smooth iterations:\" />\n+   <CheckBox fx:id=\"normalRefinementCheckBox\" layoutX=\"14.0\" layoutY=\"116.0\" mnemonicParsing=\"false\" selected=\"true\" text=\"Normal refinement\" />\n+   <TextField fx:id=\"minNormalDampingTextField\" layoutX=\"272.0\" layoutY=\"112.0\" prefHeight=\"25.0\" prefWidth=\"56.0\" text=\"1.0\" />\n+   <TextField fx:id=\"normalSmoothingIterationsTextField\" layoutX=\"485.0\" layoutY=\"112.0\" prefHeight=\"25.0\" prefWidth=\"56.0\" text=\"0\" />\n+   <CheckBox fx:id=\"smithCheckBox\" layoutX=\"14.0\" layoutY=\"147.0\" mnemonicParsing=\"false\" selected=\"true\" text=\"Smith masking/shadowing\" />\n+   <TextField fx:id=\"unsuccessfulLMIterationsTextField\" layoutX=\"486.0\" layoutY=\"143.0\" prefHeight=\"25.0\" prefWidth=\"56.0\" text=\"8\" />\n+   <Label layoutX=\"190.0\" layoutY=\"147.0\" text=\"Unsuccessful Levenberg-Marquardt iterations allowed:\" />\n+   <CheckBox fx:id=\"exportTextureLODsCheckbox\" layoutX=\"14.0\" layoutY=\"176.0\" mnemonicParsing=\"false\" text=\"Generate low-res textures\" />\n+   <CheckBox fx:id=\"openViewerOnComplete\" layoutX=\"14.0\" layoutY=\"203.0\" mnemonicParsing=\"false\" text=\"Open Viewer once complete\" />\n+   <CheckBox fx:id=\"translucencyCheckBox\" layoutX=\"15.0\" layoutY=\"50.0\" mnemonicParsing=\"false\" text=\"Fit translucency\" />\n </AnchorPane>"
        }
    ]
}